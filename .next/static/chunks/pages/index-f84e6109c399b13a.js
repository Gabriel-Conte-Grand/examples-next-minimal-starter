(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7075)}])},7075:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(7568),i=t(1799),s=t(9396),a=t(655),c=t(5893),l=t(6336),d=t(918),o=t(120),u=t(9630),h=t(4412),x=t(9072),g=t(5214),j=t(3265),m=t(4548),Z=t(5343),f=t(9653),p=t(562),v=t(6307),_=t(7294),w=(0,t(3186).x3)(),b=t(5050),y=t(784),C=t(8377),P=t(1403);function k(){return(0,c.jsx)(_.Fragment,{children:(0,c.jsx)(C.Z,{mb:2,sx:{display:"flex",marginInline:"25%"},children:(0,c.jsx)(b.Z,{position:"static",children:(0,c.jsxs)(y.Z,{children:[(0,c.jsx)(C.Z,{mr:2,children:(0,c.jsx)(P.Z,{fontSize:"large"})}),(0,c.jsx)(u.Z,{variant:"h6",children:"Next.JS Chat App"})]})})})})}function S(){var e=(0,_.useState)(""),n=e[0],t=e[1],b=w.useQuery(["messages.msg.list"]).data,y=w.useMutation(["messages.msg.add"]),C=function(){var e=(0,r.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return n.trim().length?[4,y.mutate({text:n})]:[3,2];case 1:e.sent(),t(""),e.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if(!b)return(0,c.jsx)("div",{style:N,children:(0,c.jsx)("h1",{children:"Loading..."})});var P=b.map((function(e){var n=(new Date).toDateString().slice(0,-5),t=new Date(e.createdAt).getHours(),r=new Date(e.createdAt).getMinutes().toString();return 1===r.toString().length&&(r="0"+r),n=n+", "+t+":"+r,(0,s.Z)((0,i.Z)({},e),{createdAt:n})}));return(0,c.jsxs)("div",{children:[(0,c.jsx)(k,{}),(0,c.jsx)(_.Fragment,{children:(0,c.jsx)(l.Z,{sx:{mb:4},children:(0,c.jsx)(d.Z,{elevation:5,children:(0,c.jsxs)(o.Z,{p:3,children:[(0,c.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:"Public Chat"}),(0,c.jsx)(h.Z,{}),(0,c.jsxs)(x.ZP,{container:!0,spacing:4,alignItems:"center",children:[(0,c.jsx)(x.ZP,{sx:{height:"20rem"},xs:12,item:!0,children:(0,c.jsx)(g.Z,{sx:{height:"18rem",overflow:"auto",backgroundColor:"whitesmoke",fontSize:"1.05rem"},children:null===P||void 0===P?void 0:P.map((function(e){return(0,c.jsx)(j.ZP,{sx:{borderRadius:"1.15rem",lineHeight:"1.5",maxWidth:"100%",minWidth:"50%",padding:" 0.5rem .875rem",position:"relative"},children:(0,c.jsx)(x.ZP,{xs:4,children:(0,c.jsxs)(m.Z,{sx:{backgroundColor:"paleturquoise",borderRadius:"5px",padding:"5px",paddingLeft:"7px"},children:[(0,c.jsx)(m.Z,{primary:"".concat(e.text)}),(0,c.jsx)(m.Z,{secondary:"".concat(e.createdAt)})]})})},e._id)}))})}),(0,c.jsx)(x.ZP,{xs:11,item:!0,children:(0,c.jsx)(Z.Z,{fullWidth:!0,children:(0,c.jsx)(f.Z,{onChange:function(e){var n=e.target;return t(n.value)},value:n,label:"Type your message...",variant:"outlined"})})}),(0,c.jsx)(x.ZP,{xs:1,item:!0,children:(0,c.jsx)(p.Z,{onClick:C,"aria-label":"send",color:"primary",children:(0,c.jsx)(v.Z,{})})})]})]})})})})]})}var N={width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}}},function(e){e.O(0,[773,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);